(()=>{var t={521:()=>{new Swiper(".swiper",{slidesPerView:4,slidesPerGroup:4,loop:!0,observer:!0,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,s),o.exports}(()=>{"use strict";function t(t,e){return t.some((function(t){return e==t}))}s(521);const e=class{setItem(t,e){localStorage.setItem(t,e)}removeItem(t){localStorage.removeItem(t)}getItem(t){return localStorage.getItem(t)}getAllItems(){return Object.keys(localStorage)}getStorageLength(){return localStorage.length}},a=new class{constructor(t){this._storage=t,this.showWatchlist=this.showWatchlist.bind(this)}addToWatchlist(e){const s=e.target.closest("path"),a=s.closest("div.swiper-slide"),i=s.closest("div.card");t(this._storage.getAllItems(),`${i.id}key`)?(this._storage.removeItem(`${i.id}key`,a.innerHTML),e.target.closest("path").classList.remove("inWatchlist")):(e.target.closest("path").classList.add("inWatchlist"),this._storage.setItem(`${i.id}key`,a.innerHTML))}showWatchlist(){const e=document.getElementById("favorites");if("block"===watchlist.style.display)e.innerHTML="",history.go(-1),watchlist.style.display="none",mainBlock.style.minHeight="900px";else{history.pushState(null,null,"#favorites");for(let t=0;t<this._storage.getStorageLength();t++){const s=this._storage.getItem(localStorage.key(t));e.innerHTML+=`<div class="card">${s}</div>`}document.querySelectorAll("#favorites .card-btn-favorietes").forEach((t=>{t.style.backgroundColor="#F2DD92"})),watchlist.style.display="block",mainBlock.style.minHeight=watchlist.offsetHeight+"px"}const s=this._storage.getAllItems(),a=document.querySelectorAll("#favorites > .card");for(let e=0;e<a.length;e++)a[e].querySelector(".card-btn-favorietes").addEventListener("click",(e=>{e.target.closest("path").classList.remove("inWatchlist");const a=e.target.closest("div.card");t(s,`${a.id}key`)&&this._storage.removeItem(`${a.id}key`)}))}}(new e),i=new class{constructor(t){this._storage=t}fillHeartsIfInLocalStorage(e){if(this._storage.getStorageLength()){const s=this._storage.getAllItems();for(let a=0;a<e.length;a++){let i=e[a];t(s,`${i.id}key`)&&i.querySelector("path").classList.add("inWatchlist")}}}showMovies(t){t.Search.forEach((async t=>{let e=await fetch(`https://www.omdbapi.com/?i=${t.imdbID}&apikey=e668e570`),s=await e.json();const i=`${s.imdbID}watchlistBtn`,o=document.createElement("div");o.classList.add("swiper-slide"),o.innerHTML=`\n          \n              <div class="card" id=${s.imdbID}>\n          \n                  <span id=${s.imdbID} class="hide movie-key">${s.imdbID}key</span>\n                  <span class="card-title">${t.Title}</span>\n                  <img src=${t.Poster} class="card-poster" />\n          \n          \n                  <div class="card-header">\n                    <div class="card-info">\n                      <span class="card-year">${t.Year}</span>\n                      <button class="card-btn-favorietes" id="${i}watchlistBtn"><svg class="like" viewBox="0 0 612 792" width="100%" height="100%"><path d="M562.413,284.393c-9.68,41.044-32.121,78.438-64.831,108.07L329.588,542.345l-165.11-149.843 c-32.771-29.691-55.201-67.076-64.892-108.12c-6.965-29.484-4.103-46.14-4.092-46.249l0.147-0.994 c6.395-72.004,56.382-124.273,118.873-124.273c46.111,0,86.703,28.333,105.965,73.933l9.061,21.477l9.061-21.477 c18.958-44.901,61.694-73.922,108.896-73.922c62.481,0,112.478,52.27,119,125.208C566.517,238.242,569.379,254.908,562.413,284.393z"/></svg></button>\n                    </div>\n                  </div>\n          \n                  <div class="card-rating">\n                    <img src="../images/star-icon.png" class="star-icon" />\n                    <span>${s.imdbRating}</span>\n                  </div>\n          \n              </div>\n              `,moviesList.appendChild(o),document.getElementById(`${i}watchlistBtn`).addEventListener("click",(t=>{a.addToWatchlist(t)}));const l=document.querySelectorAll(".card");this.fillHeartsIfInLocalStorage(l)}))}clearSearchInput(){searchInput.value=""}}(new e),o=new class{async getMovies(){const t=await fetch(`https://www.omdbapi.com/?s=${searchInput.value.trim()}&apikey=d1075702`),e=await t.json();"False"==e.Response&&alert(e.Error),moviesList.innerHTML="",i.showMovies(e)}},l=new class{constructor(t){this._storage=t,this.showWatchlist=this.showWatchlist.bind(this)}addToWatchlist(e){const s=e.target.closest("path"),a=s.closest("div.swiper-slide"),i=s.closest("div.card");t(this._storage.getAllItems(),`${i.id}key`)?(this._storage.removeItem(`${i.id}key`,a.innerHTML),e.target.closest("path").classList.remove("inWatchlist")):(e.target.closest("path").classList.add("inWatchlist"),this._storage.setItem(`${i.id}key`,a.innerHTML))}showWatchlist(){const e=document.getElementById("favorites");if("block"===watchlist.style.display)e.innerHTML="",history.go(-1),watchlist.style.display="none",mainBlock.style.minHeight="900px";else{history.pushState(null,null,"#favorites");for(let t=0;t<this._storage.getStorageLength();t++){const s=this._storage.getItem(localStorage.key(t));e.innerHTML+=`<div class="card">${s}</div>`}document.querySelectorAll("#favorites .card-btn-favorietes").forEach((t=>{t.style.backgroundColor="#F2DD92"})),watchlist.style.display="block",mainBlock.style.minHeight=watchlist.offsetHeight+"px"}const s=this._storage.getAllItems(),a=document.querySelectorAll("#favorites > .card");for(let e=0;e<a.length;e++)a[e].querySelector(".card-btn-favorietes").addEventListener("click",(e=>{e.target.closest("path").classList.remove("inWatchlist");const a=e.target.closest("div.card");t(s,`${a.id}key`)&&this._storage.removeItem(`${a.id}key`)}))}}(new e),r=document.getElementById("searchInput"),n=document.getElementById("searchBtn"),c=document.getElementById("favorites_btn");document.getElementById("deleteTextBtn").addEventListener("click",i.clearSearchInput),n&&n.addEventListener("click",o.getMovies),document.addEventListener("DOMContentLoaded",(()=>{r.value="marvel",o.getMovies(),r.value=""})),c.addEventListener("click",l.showWatchlist)})()})();
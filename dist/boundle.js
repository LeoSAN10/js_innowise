(()=>{const e=document.getElementById("searchInput"),t=document.getElementById("searchBtn"),n=document.getElementById("moviesList"),a=document.getElementById("watchlist"),l=document.getElementById("favorites"),s=document.getElementById("favorites_btn");async function c(){if(n.children){const{children:e}=n;Array.prototype.slice.call(e).forEach((e=>e.remove()))}const t=await fetch(`https://www.omdbapi.com/?s=${e.value.trim()}&apikey=d1075702`),a=await t.json();"False"==a.Response&&alert(a.Error),a.Search.forEach((async e=>{const t=await fetch(`https://www.omdbapi.com/?i=${e.imdbID}&apikey=d1075702`),a=await t.json(),l=a.imdbID,s=`${a.imdbID}key`,c=`${a.imdbID}watchlistBtn`;n.innerHTML+=`\n      <div class="swiper-slide" id="slide">\n          <div class="card" id=${l}>\n\n              <span id=${s} class="hide movie-key">${s}</span>\n              <span class="card-title">${a.Title}</span>\n              <img src=${a.Poster} class="card-poster" />\n\n\n              <div class="card-header">\n                <div class="card-info">\n                  <span class="card-year">${a.Year}</span>\n                  <button class="card-btn-favorietes" id="${c}""><svg class="like" viewBox="0 0 612 792" width="100%" height="100%"><path d="M562.413,284.393c-9.68,41.044-32.121,78.438-64.831,108.07L329.588,542.345l-165.11-149.843 c-32.771-29.691-55.201-67.076-64.892-108.12c-6.965-29.484-4.103-46.14-4.092-46.249l0.147-0.994 c6.395-72.004,56.382-124.273,118.873-124.273c46.111,0,86.703,28.333,105.965,73.933l9.061,21.477l9.061-21.477 c18.958-44.901,61.694-73.922,108.896-73.922c62.481,0,112.478,52.27,119,125.208C566.517,238.242,569.379,254.908,562.413,284.393z"/></svg></button>\n                </div>\n              </div>\n\n              <div class="card-rating">\n                <img src="images/star-icon.png" class="star-icon" />\n                <span>${a.imdbRating}</span>\n              </div>\n  \n          </div>\n      </div>\n          `;const o=document.getElementById(c);if(console.log(o,l,s),o.addEventListener("click",(function(){!function(e,t){const n=document.querySelectorAll("path");for(let a=0;a<n.length;a++)n[a].addEventListener("click",(n=>{if(0==localStorage.length)n.target.closest("path").classList.add("ddd"),localStorage.setItem(e.innerHTML,t.innerHTML);else for(let a=-1;a<=localStorage.length;a++)localStorage.key(a)!==e.textContent?(n.target.closest("path").classList.add("ddd"),localStorage.setItem(e.innerHTML,t.innerHTML)):(localStorage.removeItem(e.innerHTML,t.innerHTML),n.target.closest("path").classList.remove("ddd"))}))}(s,l)})),localStorage.length)for(let e=0;e<=localStorage.length;e++){const t=localStorage.getItem(localStorage.key(e)).slice(26,38),n=document.querySelectorAll(".card");for(let e=0;e<n.length;e++){const a=n[e];if(a.childNodes[1].id==t){const e=a.querySelectorAll("path");for(let t=0;t<=e.length;t++)e[t].classList.add("ddd")}}}}))}t&&t.addEventListener("click",c),document.addEventListener("DOMContentLoaded",(()=>{e.value="marvel",c(),e.value=""})),s.addEventListener("click",(function(){if("block"===a.style.display)l.innerHTML="",history.go(-1),a.style.display="none";else{history.pushState(null,null,"#favorites");for(let e=0;e<localStorage.length;e++){const t=localStorage.getItem(localStorage.key(e));l.innerHTML+=`<div class="card">${t}</div>`}document.querySelectorAll("#favorites .card-btn-favorietes").forEach((e=>{e.style.backgroundColor="#F2DD92"})),a.style.display="block"}}))})();